# Migration `20200929110528-create-shift-model`

This migration has been generated by vitor0p9f at 9/29/2020, 8:05:28 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."Students" DROP CONSTRAINT "Students_id_usuario_nome_fkey"

CREATE TABLE "public"."Shifts" (
"id_turno" SERIAL,
"nome" text   NOT NULL ,
PRIMARY KEY ("id_turno")
)

ALTER TABLE "public"."Students" ADD FOREIGN KEY ("id_usuario", "nome")REFERENCES "public"."Users"("id_usuario","nome") ON DELETE CASCADE ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200929011029-fix..20200929110528-create-shift-model
--- datamodel.dml
+++ datamodel.dml
@@ -3,13 +3,13 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 model Info4{
-  id_sensor Int @unique
+  id_sensor Int 
   total_asor Int 
   asor Int? @default(0)
   total_construcao_de_sites Int
   construcao_de_sites Int? @default(0)
@@ -38,8 +38,10 @@
   total_sociologia Int
   sociologia Int? @default(0)
   mes Int
+  @@unique([id_sensor])
+
   Student Students @relation(fields: [id_sensor],references: [id_sensor])
 }
 model Users{
@@ -106,5 +108,11 @@
   id_curso Int
   id_turno Int
   Course Courses @relation(fields: [id_curso],references: [id_curso])
-}
+}
+
+model Shifts{
+  id_turno Int @default(autoincrement()) @id
+  nome String
+}
+
```


