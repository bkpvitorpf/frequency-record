# Migration `20200930181503-create-quimica-model`

This migration has been generated by vitor0p9f at 9/30/2020, 3:15:03 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."Students" DROP CONSTRAINT "Students_id_usuario_nome_fkey"

CREATE TABLE "public"."Quimica" (
"total_aulas" integer   NOT NULL ,
"aulas_ministradas" integer   NOT NULL ,
"mes" text   NOT NULL ,
"id_modalidade" integer   NOT NULL ,
"id_curso" integer   NOT NULL ,
"id_turma" integer   NOT NULL 
)

CREATE UNIQUE INDEX "Quimica.total_aulas_aulas_ministradas_unique" ON "public"."Quimica"("total_aulas", "aulas_ministradas")

ALTER TABLE "public"."Quimica" ADD FOREIGN KEY ("id_modalidade")REFERENCES "public"."Modes"("id_modalidade") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "public"."Quimica" ADD FOREIGN KEY ("id_curso")REFERENCES "public"."Courses"("id_curso") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "public"."Quimica" ADD FOREIGN KEY ("id_turma")REFERENCES "public"."Classes"("id_turma") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "public"."Students" ADD FOREIGN KEY ("id_usuario", "nome")REFERENCES "public"."Users"("id_usuario","nome") ON DELETE CASCADE ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200929111140-create-eletronica-aplicada-model..20200930181503-create-quimica-model
--- datamodel.dml
+++ datamodel.dml
@@ -3,9 +3,9 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 model Info4{
   id_sensor Int 
@@ -128,5 +128,20 @@
   Mode Modes @relation(fields: [id_modalidade],references: [id_modalidade])
   Course Courses @relation(fields: [id_curso],references: [id_curso])
   Class Classes @relation(fields: [id_turma],references: [id_turma])
+}
+
+model Quimica{
+  total_aulas Int
+  aulas_ministradas Int
+  mes String
+  id_modalidade Int
+  id_curso Int
+  id_turma Int
+
+  @@unique([total_aulas,aulas_ministradas])
+  
+  Mode Modes @relation(fields: [id_modalidade],references: [id_modalidade])
+  Course Courses @relation(fields: [id_curso],references: [id_curso])
+  Class Classes @relation(fields: [id_turma],references: [id_turma])
 }
```


