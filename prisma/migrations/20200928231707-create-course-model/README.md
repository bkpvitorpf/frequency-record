# Migration `20200928231707-create-course-model`

This migration has been generated by vitor0p9f at 9/28/2020, 8:17:07 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."Student" DROP CONSTRAINT "Student_id_usuario_fkey"

CREATE TABLE "public"."Users" (
"id_usuario" SERIAL,
"nome" text   NOT NULL ,
"email" text   NOT NULL ,
"senha" text   NOT NULL ,
"nivel_de_permissao" integer   NOT NULL ,
PRIMARY KEY ("id_usuario")
)

CREATE TABLE "public"."Students" (
"nome" text   NOT NULL ,
"matricula" integer   NOT NULL ,
"id_sensor" integer   NOT NULL ,
"id_usuario" integer   NOT NULL ,
"id_modalidade" integer   NOT NULL ,
"id_curso" integer   NOT NULL ,
"id_turma" integer   NOT NULL 
)

CREATE TABLE "public"."Courses" (
"nome" text   NOT NULL ,
"id_curso" SERIAL,
"id_modalidade" integer   NOT NULL ,
"professores" integer []  ,
PRIMARY KEY ("id_curso")
)

CREATE UNIQUE INDEX "Users.email_unique" ON "public"."Users"("email")

CREATE UNIQUE INDEX "Students.matricula_unique" ON "public"."Students"("matricula")

ALTER TABLE "public"."Students" ADD FOREIGN KEY ("id_usuario")REFERENCES "public"."Users"("id_usuario") ON DELETE CASCADE ON UPDATE CASCADE

DROP TABLE "public"."Student"

DROP TABLE "public"."User"
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200928231307-create-student-model..20200928231707-create-course-model
--- datamodel.dml
+++ datamodel.dml
@@ -3,9 +3,9 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 model Info4{
   id_sensor Int @unique
@@ -38,22 +38,30 @@
   total_sociologia Int
   sociologia Int? @default(0)
 }
-model User{
+model Users{
   id_usuario Int @id @default(autoincrement())
   nome String
   email String @unique
   senha String
   nivel_de_permissao Int
 }
-model Student{
+model Students{
   nome String
   matricula Int @unique
   id_sensor Int
   id_usuario Int
   id_modalidade Int
   id_curso Int
   id_turma Int
-  User User @relation(fields: [id_usuario],references: [id_usuario])
-}
+  User Users @relation(fields: [id_usuario],references: [id_usuario])
+}
+
+model Courses{
+  nome String
+  id_curso Int @default(autoincrement()) @id
+  id_modalidade Int
+  professores Int[]
+}
+
```


