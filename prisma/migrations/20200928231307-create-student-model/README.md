# Migration `20200928231307-create-student-model`

This migration has been generated by vitor0p9f at 9/28/2020, 8:13:07 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "public"."Info4" (
"id_sensor" integer   NOT NULL ,
"total_asor" integer   NOT NULL ,
"asor" integer   DEFAULT 0,
"total_construcao_de_sites" integer   NOT NULL ,
"construcao_de_sites" integer   DEFAULT 0,
"total_eletronica_aplicada" integer   NOT NULL ,
"eletronica_aplicada" integer   DEFAULT 0,
"total_espanhol" integer   NOT NULL ,
"espanhol" integer   DEFAULT 0,
"total_filosofia" integer   NOT NULL ,
"filosofia" integer   DEFAULT 0,
"total_geografia" integer   NOT NULL ,
"geografia" integer   DEFAULT 0,
"total_historia" integer   NOT NULL ,
"historia" integer   DEFAULT 0,
"total_hst" integer   NOT NULL ,
"hst" integer   DEFAULT 0,
"total_instalacoes_eletricas_aplicadas" integer   NOT NULL ,
"instalacoes_eletricas_aplicadas" integer   DEFAULT 0,
"total_portugues" integer   NOT NULL ,
"portugues" integer   DEFAULT 0,
"total_programacao_web" integer   NOT NULL ,
"programacao_web" integer   DEFAULT 0,
"total_pcc" integer   NOT NULL ,
"pcc" integer   DEFAULT 0,
"total_seguranca_da_informacao" integer   NOT NULL ,
"seguranca_da_informacao" integer   DEFAULT 0,
"total_sociologia" integer   NOT NULL ,
"sociologia" integer   DEFAULT 0
)

CREATE TABLE "public"."User" (
"id_usuario" SERIAL,
"nome" text   NOT NULL ,
"email" text   NOT NULL ,
"senha" text   NOT NULL ,
"nivel_de_permissao" integer   NOT NULL ,
PRIMARY KEY ("id_usuario")
)

CREATE TABLE "public"."Student" (
"nome" text   NOT NULL ,
"matricula" integer   NOT NULL ,
"id_sensor" integer   NOT NULL ,
"id_usuario" integer   NOT NULL ,
"id_modalidade" integer   NOT NULL ,
"id_curso" integer   NOT NULL ,
"id_turma" integer   NOT NULL 
)

CREATE UNIQUE INDEX "Info4.id_sensor_unique" ON "public"."Info4"("id_sensor")

CREATE UNIQUE INDEX "User.email_unique" ON "public"."User"("email")

CREATE UNIQUE INDEX "Student.matricula_unique" ON "public"."Student"("matricula")

ALTER TABLE "public"."Student" ADD FOREIGN KEY ("id_usuario")REFERENCES "public"."User"("id_usuario") ON DELETE CASCADE ON UPDATE CASCADE

DROP TABLE "public"."Users"

DROP TABLE "public"."info4"
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200928230412-create-users-model..20200928231307-create-student-model
--- datamodel.dml
+++ datamodel.dml
@@ -3,12 +3,12 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
-model info4{
+model Info4{
   id_sensor Int @unique
   total_asor Int 
   asor Int? @default(0)
   total_construcao_de_sites Int
@@ -38,12 +38,22 @@
   total_sociologia Int
   sociologia Int? @default(0)
 }
-model Users{
+model User{
   id_usuario Int @id @default(autoincrement())
   nome String
   email String @unique
   senha String
   nivel_de_permissao Int
 }
+model Student{
+  nome String
+  matricula Int @unique
+  id_sensor Int
+  id_usuario Int
+  id_modalidade Int
+  id_curso Int
+  id_turma Int
+  User User @relation(fields: [id_usuario],references: [id_usuario])
+}
```


